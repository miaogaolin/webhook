package main

import (
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestNewSha256(t *testing.T) {
	exp := "452606ae4d04eca0a39cec8229206b09a5a49324a46e65d834d2fcce79f9c7a5"
	actual := NewSha256([]byte(`{"ref":"refs/heads/master","before":"fac943ca4d1b5b55dc9c646ed53a9cab8c4021d9","after":"58ffcfdc2186ac1346a40d3c2296d1449e4bf5d3","repository":{"id":386215204,"node_id":"MDEwOlJlcG9zaXRvcnkzODYyMTUyMDQ=","name":"printlove","full_name":"miaogaolin/printlove","private":false,"owner":{"name":"miaogaolin","email":"57740293+miaogaolin@users.noreply.github.com","login":"miaogaolin","id":57740293,"node_id":"MDQ6VXNlcjU3NzQwMjkz","avatar_url":"https://avatars.githubusercontent.com/u/57740293?v=4","gravatar_id":"","url":"https://api.github.com/users/miaogaolin","html_url":"https://github.com/miaogaolin","followers_url":"https://api.github.com/users/miaogaolin/followers","following_url":"https://api.github.com/users/miaogaolin/following{/other_user}","gists_url":"https://api.github.com/users/miaogaolin/gists{/gist_id}","starred_url":"https://api.github.com/users/miaogaolin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miaogaolin/subscriptions","organizations_url":"https://api.github.com/users/miaogaolin/orgs","repos_url":"https://api.github.com/users/miaogaolin/repos","events_url":"https://api.github.com/users/miaogaolin/events{/privacy}","received_events_url":"https://api.github.com/users/miaogaolin/received_events","type":"User","site_admin":false},"html_url":"https://github.com/miaogaolin/printlove","description":"个人博客","fork":false,"url":"https://github.com/miaogaolin/printlove","forks_url":"https://api.github.com/repos/miaogaolin/printlove/forks","keys_url":"https://api.github.com/repos/miaogaolin/printlove/keys{/key_id}","collaborators_url":"https://api.github.com/repos/miaogaolin/printlove/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/miaogaolin/printlove/teams","hooks_url":"https://api.github.com/repos/miaogaolin/printlove/hooks","issue_events_url":"https://api.github.com/repos/miaogaolin/printlove/issues/events{/number}","events_url":"https://api.github.com/repos/miaogaolin/printlove/events","assignees_url":"https://api.github.com/repos/miaogaolin/printlove/assignees{/user}","branches_url":"https://api.github.com/repos/miaogaolin/printlove/branches{/branch}","tags_url":"https://api.github.com/repos/miaogaolin/printlove/tags","blobs_url":"https://api.github.com/repos/miaogaolin/printlove/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/miaogaolin/printlove/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/miaogaolin/printlove/git/refs{/sha}","trees_url":"https://api.github.com/repos/miaogaolin/printlove/git/trees{/sha}","statuses_url":"https://api.github.com/repos/miaogaolin/printlove/statuses/{sha}","languages_url":"https://api.github.com/repos/miaogaolin/printlove/languages","stargazers_url":"https://api.github.com/repos/miaogaolin/printlove/stargazers","contributors_url":"https://api.github.com/repos/miaogaolin/printlove/contributors","subscribers_url":"https://api.github.com/repos/miaogaolin/printlove/subscribers","subscription_url":"https://api.github.com/repos/miaogaolin/printlove/subscription","commits_url":"https://api.github.com/repos/miaogaolin/printlove/commits{/sha}","git_commits_url":"https://api.github.com/repos/miaogaolin/printlove/git/commits{/sha}","comments_url":"https://api.github.com/repos/miaogaolin/printlove/comments{/number}","issue_comment_url":"https://api.github.com/repos/miaogaolin/printlove/issues/comments{/number}","contents_url":"https://api.github.com/repos/miaogaolin/printlove/contents/{+path}","compare_url":"https://api.github.com/repos/miaogaolin/printlove/compare/{base}...{head}","merges_url":"https://api.github.com/repos/miaogaolin/printlove/merges","archive_url":"https://api.github.com/repos/miaogaolin/printlove/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/miaogaolin/printlove/downloads","issues_url":"https://api.github.com/repos/miaogaolin/printlove/issues{/number}","pulls_url":"https://api.github.com/repos/miaogaolin/printlove/pulls{/number}","milestones_url":"https://api.github.com/repos/miaogaolin/printlove/milestones{/number}","notifications_url":"https://api.github.com/repos/miaogaolin/printlove/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/miaogaolin/printlove/labels{/name}","releases_url":"https://api.github.com/repos/miaogaolin/printlove/releases{/id}","deployments_url":"https://api.github.com/repos/miaogaolin/printlove/deployments","created_at":1626336879,"updated_at":"2021-11-01T08:19:30Z","pushed_at":1635755046,"git_url":"git://github.com/miaogaolin/printlove.git","ssh_url":"git@github.com:miaogaolin/printlove.git","clone_url":"https://github.com/miaogaolin/printlove.git","svn_url":"https://github.com/miaogaolin/printlove","homepage":"https://printlove.cn","size":123958,"stargazers_count":0,"watchers_count":0,"language":"HTML","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":null,"allow_forking":true,"is_template":false,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"master","stargazers":0,"master_branch":"master"},"pusher":{"name":"miaogaolin","email":"57740293+miaogaolin@users.noreply.github.com"},"sender":{"login":"miaogaolin","id":57740293,"node_id":"MDQ6VXNlcjU3NzQwMjkz","avatar_url":"https://avatars.githubusercontent.com/u/57740293?v=4","gravatar_id":"","url":"https://api.github.com/users/miaogaolin","html_url":"https://github.com/miaogaolin","followers_url":"https://api.github.com/users/miaogaolin/followers","following_url":"https://api.github.com/users/miaogaolin/following{/other_user}","gists_url":"https://api.github.com/users/miaogaolin/gists{/gist_id}","starred_url":"https://api.github.com/users/miaogaolin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miaogaolin/subscriptions","organizations_url":"https://api.github.com/users/miaogaolin/orgs","repos_url":"https://api.github.com/users/miaogaolin/repos","events_url":"https://api.github.com/users/miaogaolin/events{/privacy}","received_events_url":"https://api.github.com/users/miaogaolin/received_events","type":"User","site_admin":false},"created":false,"deleted":false,"forced":true,"base_ref":null,"compare":"https://github.com/miaogaolin/printlove/compare/fac943ca4d1b...58ffcfdc2186","commits":[],"head_commit":{"id":"58ffcfdc2186ac1346a40d3c2296d1449e4bf5d3","tree_id":"6b45b4d1402aef3ac7a7424359feecfc6e3acc94","distinct":true,"message":"delete image","timestamp":"2021-11-01T16:01:03+08:00","url":"https://github.com/miaogaolin/printlove/commit/58ffcfdc2186ac1346a40d3c2296d1449e4bf5d3","author":{"name":"DESKTOP-RKMKLHA\\owner","email":"2825873215@QQ.COM","username":"miaogaolin"},"committer":{"name":"DESKTOP-RKMKLHA\\owner","email":"2825873215@QQ.COM","username":"miaogaolin"},"added":[],"removed":["content/posts/english/images/hn-1.png","content/posts/english/images/hn-2.png","content/posts/english/images/hn-3.png","content/posts/english/images/hn-4.png","content/posts/english/images/hn-5.png"],"modified":[]}}`),
		[]byte("123123"))
	assert.Equal(t, exp,  actual)
}
